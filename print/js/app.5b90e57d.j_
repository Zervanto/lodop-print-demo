(function(t){function e(e){for(var r,a,s=e[0],l=e[1],c=e[2],u=0,p=[];u<s.length;u++)a=s[u],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&p.push(i[a][0]),i[a]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(t[r]=l[r]);d&&d(e);while(p.length)p.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,s=1;s<n.length;s++){var l=n[s];0!==i[l]&&(r=!1)}r&&(o.splice(e--,1),t=a(a.s=n[0]))}return t}var r={},i={app:0},o=[];function a(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=r,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/print/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var d=l;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";n("85ec")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"group"},[n("button",{on:{click:function(e){return t.btnClick(1)}}},[t._v("扫描打印机")])]),n("div",{staticClass:"group"},[t._v(" 打印机列表: "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.selectIndex,expression:"selectIndex"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectIndex=e.target.multiple?n:n[0]}}},[t.printers.length>0?t._l(t.printers,(function(e,r){return n("option",{key:r,domProps:{value:r}},[t._v(t._s(e))])})):n("option",{attrs:{value:"-"}},[t._v("暂无")])],2)]),n("div",{staticClass:"group"},[t._v(" 宽："),n("input",{directives:[{name:"model",rawName:"v-model",value:t.width,expression:"width"}],domProps:{value:t.width},on:{input:function(e){e.target.composing||(t.width=e.target.value)}}}),t._v("mm ")]),n("div",{staticClass:"group"},[t._v(" 长："),n("input",{directives:[{name:"model",rawName:"v-model",value:t.height,expression:"height"}],domProps:{value:t.height},on:{input:function(e){e.target.composing||(t.height=e.target.value)}}}),t._v("mm ")]),n("div",{staticClass:"group"},[t._v(" 内容："),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}})]),n("div",{staticClass:"group"},[n("button",{on:{click:function(e){return t.btnClick(2)}}},[t._v("打印")])]),n("div",{staticClass:"group"},[n("button",{on:{click:function(e){return t.btnClick(3)}}},[t._v("预览")])])])},o=[],a=(n("99af"),n("3835"));n("a9e3");function s(){var t=new Array;if(void 0!=window.screen.deviceXDPI)t[0]=window.screen.deviceXDPI,t[1]=window.screen.deviceYDPI;else{var e=document.createElement("DIV");e.style.cssText="width:1in;height:1in;position:absolute;left:0px;top:0px;z-index:99;visibility:hidden",document.body.appendChild(e),t[0]=parseInt(e.offsetWidth),t[1]=parseInt(e.offsetHeight),e.parentNode.removeChild(e)}return t}function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};console.log("params",t);var e=t.width?Number(t.width):36,n=t.height?Number(t.height):80,r=getLodop();r.PRINT_INIT(""),r.SET_PRINT_MODE("TRYLINKPRINTER_NOALERT",!0),"number"===typeof t.printerIndex&&r.SET_PRINTER_INDEX(t.printerIndex),r.SET_PRINT_PAGESIZE(t.orient||0,10*e,10*n,t.pageName||""),r.ADD_PRINT_HTM(0,0,"100%","100%",t.html),t.isPreview?r.PREVIEW():r.PRINT()}function c(){var t=getLodop(),e=t.GET_PRINTER_COUNT(),n=[];if(e>0)for(var r=0;r<e;r++)n.push(t.GET_PRINTER_NAME(r)||"");return n}function d(t){if("number"!==typeof t)return 0;var e=s()||[96,96],n=Object(a["a"])(e,1),r=n[0];return t/25.4*r}var u={name:"App",data:function(){return{printers:[],selectIndex:0,width:36,height:80,content:""}},methods:{btnClick:function(t){if(1===t)this.printers=c();else if(2===t||3===t){var e=12==this.width,n=e?24:this.width,r=d(n-n/6*2),i="\n<style>\nhtml, body { margin: 0; box-sizing: border-box; }\ntable { position: relative; height: ".concat(r,"px; ").concat(e?"transform: scale(0.5); transform-origin: left top;":""," }\ntable, tr, td, th { box-sizing: border-box; margin: 0; padding: 0; border: 1px solid black; border-collapse: collapse; font-size: 12px; }\ntr { height: calc(100% / 3); }\ntd { padding: 2px 5px; }\ntd img { position: absolute; left: 1px; top: 1px; width: ").concat(r/3*2-2,'px }\n</style>\n<table>\n  <tr>\n      <td rowspan="2">\n        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQAAAABYmaj5AAAA60lEQVR42tXUsakEIRAA0FkMzM4GBNswsyVtwL1r4K4ls2lDsAHNNpCdP58P/2+yNxv+ExGfIIyOI9ChdfjH6gArqVFgkTRoRm8X5ImkYjOPCOmCVqzmmrKuyxVxLGGaQ2Rn4vMltOnvtKc63JwouGl6FXpJ2nUbW9v9NJLGZhNS5zVR2J5B9VBXSTvMqKsp7iFpbIqw5uBIEiFkmODByHI90DP8ZOydugfQNYIbkrgN4k2OJHFuo3cPVKL4vSScC9lFVLFRA8dCF7Rio+3wyt+otHuoRhTN7NXd/1bqqb5runC3SdKn/GBHfQGdf7hLPB0o5AAAAABJRU5ErkJggg=="/>\n      </td>\n      <td>工具件号：</td>\n      <td>TJHT001</td>\n  </tr>\n  <tr>\n      <td>编号：</td>\n      <td>ZBH001</td>\n  </tr>\n  <tr><td>ZBH0074646546546</td><td>名称:</td><td>测试打印件</td></tr>\n</table>');this.printers.length>this.selectIndex?l({width:this.width,height:this.height,orient:2,printerIndex:this.selectIndex,html:this.content?this.content:i,isPreview:3===t},this.selectIndex):alert("未能正确获取打印机!")}}}},p=u,v=(n("034f"),n("2877")),f=Object(v["a"])(p,i,o,!1,null,null,null),h=f.exports;r["a"].config.productionTip=!1,new r["a"]({render:function(t){return t(h)}}).$mount("#app")},"85ec":function(t,e,n){}});